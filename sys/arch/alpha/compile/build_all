#!/bin/sh -
#
#	$OpenBSD: build_all,v 1.3 1996/07/29 22:58:17 niklas Exp $
#	$NetBSD: build_all,v 1.4.4.1 1996/06/15 03:46:17 cgd Exp $

cflist=`cd ../conf ; find . -type f ! -name "*[a-z.]*" ! -name ".*" | \
    sed -e 's,^\./,,'`

docmd()
{

	echo "    ===> $*"
#	echo "        eval ($*)"
	eval "($*)"
	echo "    <==="
}

docf()
{
	echo "===> $1"
	(
		docmd "cd ../conf ; config $cf" 
		cd $cf
		docmd "time make -k clean"
		docmd "time make -k depend"
		docmd "time make -k"
	)
	echo "<==="
	echo ""
}

for cf in $cflist; do
	docf $cf
done
